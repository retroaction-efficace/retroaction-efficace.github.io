import{visibility}from"./main.js";export function sorting(){const t=document.querySelector("#draggable");if(!t)return;const e=Array.from(t.querySelectorAll("p")),i=document.querySelector(".submit"),r=document.querySelector(".retry"),s=document.querySelector(".correct"),n=document.querySelectorAll(".dropzone"),a={p1:0,p5:0,p3:1,p8:1,p2:2,p7:2,p4:3,p6:3};let d=[];const c=e.map((t=>t.id));function l(t){t.setAttribute("draggable",!0),t.classList.add("grab"),t.addEventListener("dragstart",(t=>{t.dataTransfer.setData("text/plain",t.target.id)}))}function o(t){t.preventDefault();const r=t.dataTransfer.getData("text/plain"),s=document.getElementById(r);if(s&&t.target.classList.contains("dropzone")){if(t.target.appendChild(s),!d.includes(r)){d.push(r);const t=c.indexOf(r);t>-1&&c.splice(t,1)}n.forEach((t=>{Array.from(t.children).forEach((t=>{"P"===t.tagName&&t.classList.add("small")}))})),f(),function(){const t=e.every((t=>d.includes(t.id)));visibility(i,t)}()}}function f(){if(c.every((t=>{const e=document.getElementById(t);return e&&e.classList.contains("hidden")}))){const t=e.find((t=>!d.includes(t.id)&&t.classList.contains("hidden")));t&&visibility(t,!0)}else{0===e.filter((t=>t.classList.contains("visible"))).length&&visibility(t,!1)}}function u(){let t=!0;n.forEach(((e,i)=>{Array.from(e.children).forEach((e=>{e.classList.add(a[e.id]===i?"right":"wrong"),e.classList.remove("grab"),e.removeAttribute("draggable"),a[e.id]!==i&&(t=!1)}))})),visibility(i,!1),visibility(t?s:r,!0)}function p(){d=[],e.forEach((e=>{e.classList.remove("visible","small","wrong","right"),e.classList.add("hidden"),t.appendChild(e),l(e)})),n.forEach((t=>{for(;t.firstChild;)t.removeChild(t.firstChild)})),visibility(i,!1),visibility(r,!1),visibility(s,!1),f()}e.forEach((t=>{t.classList.add("hidden"),l(t)})),f(),n.forEach((t=>{t.addEventListener("dragover",(t=>t.preventDefault())),t.addEventListener("drop",o)})),i.addEventListener("click",u),r.addEventListener("click",p)}